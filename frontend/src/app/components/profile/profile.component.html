<div class="profile-container">
  <h2>Your Profile</h2>

  <div class="user-info">
    <p>
      <strong>Username:</strong> {{ this.userService.getLoggedInUsername() }}
      <button class="edit-btn" (click)="toggleEditForm('username')">Change Username</button>
    </p>
    <p>
      <strong>Email:</strong> {{ this.userService.getLoggedInEmail() }}
      <button class="edit-btn" (click)="toggleEditForm('email')">Change Email</button>
    </p>
  </div>

  <button class="edit-btn" (click)="toggleEditForm('password')">Change Password</button>
  <button class="delete-btn" (click)="toggleDeleteForm()">Delete Profile</button>

  <p *ngIf="message">
    {{ message }}
  </p>

  <div *ngIf="editForm">
    <form (submit)="updateUser()">
      <div *ngIf="editField === 'username'">
        <label for="newUsername">New Username</label>
        <input id="newUsername" [(ngModel)]="newUsername" name="newUsername" required />
      </div>

      <div *ngIf="editField === 'email'">
        <label for="newEmail">New Email</label>
        <input id="newEmail" [(ngModel)]="newEmail" name="newEmail" required />
      </div>

      <div *ngIf="editField === 'password'">
        <label for="currentPassword">Current Password</label>
        <input id="currentPassword" [(ngModel)]="currentPassword" type="password" name="currentPassword" required />

        <label for="newPassword">New Password</label>
        <input id="newPassword" [(ngModel)]="newPassword" type="password" name="newPassword" required />
      </div>

      <button type="submit" class="submit-btn">Submit</button>
      <button class="cancel-btn" (click)="cancelEdit()">Cancel</button>
    </form>
  </div>

  <div *ngIf="deleteFormVisible">
    <h3>Confirm Profile Deletion</h3>
    <label for="password">Enter your password:</label>
    <input type="password" id="password" [(ngModel)]="password" />
    <button class="delete-btn" (click)="deleteProfile()">Delete</button>
    <button class="cancel-btn" (click)="toggleDeleteForm()">Cancel</button>
  </div>
</div>
